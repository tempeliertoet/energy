<html>
  <head>
    <link rel="icon" href="energy.ico" type="image/x-icon">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/chartist.js/latest/chartist.min.css" />
    <script src="//cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>
    <style>
    .ct-series-a .ct-bar {
        stroke: red;
        stroke-width: 20px;
    }
    </style>
  </head>
  <body>
    <h1>Energy</h1>
    <div id="energyChart" style="width: 600;height: 400;"></div>
    <script>
        var solarYields;
      $(document).ready(function(){
        const selectedYear = moment().year();
        const getSolarYield = async () => { 
            await $.getJSON("solaryield.json", function(json) {
                solarYieldList = json.filter((solarYield) => {
                    return moment(solarYield.month, "YYYY-MM-DD").year() === selectedYear;
                });
            });
            return 'done';
        };

        getSolarYield().then(() => {
            new Chartist.Bar('#energyChart', {
                labels: solarYieldList.map((solarYield) => solarYield.month),
                series: [solarYieldList.map((solarYield) => solarYield.kwh)]
            });
        });
      });
     </script>
  </body>
</html>
